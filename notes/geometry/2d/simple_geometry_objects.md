# Простые геометрические объекты
## Прямая
**Прямая** - 1 из простых геометрических объектов. Есть несколько способов задания:
1. Уравнение $Ax + By + C = 0$
2. Две несовпадающие точки $A$ и $B$
3. Точка и направляющий вектор
4. Точка и вектор нормали

Переход между третьим и четвёртым тривиален, просто повернуть вектор на $90$ градусов в какую-либо сторону, поэтому будем рассматривать только третий вариант.

### Уравнение
В отличие от школьного уравнения $y = kx + b$, является более полным - также можно задавать вертикальные прямые. Есть бесконечное множесто коэффициентов, которые задают 1 и ту же прямую. Например для $(A, B, C)$ также есть $(2A, 2B, 2C)$, и так далее.

Интересным этот метод является тем, что легко найти нужные вектора:
- Напрявляющий вектор $(B, -A)$ или $(-B, A)$
- Вектора нормали $(A, B)$ и $(-A, -B)$

Для перехода $1 \to 3$ достаточно взять какую-то точку на прямой. Например, делается это с помощью такого простого алгоритма:
- Если $A = 0$ то $(0, -\frac{C}{B})$ - прямая горизонтальная, пересечение с осью $Oy$
- Иначе любую точку. Для примера пересечение с осью $Ox$: $(-\frac{C}{A}, 0)$

А также взять направляющий вектор.

Для перехода $1 \to 2$ лучше воспользоваться $1 \to 3 \to 2$

### Две точки
Согласно евклидовой геометрии, любые несовпадающие 2 точки задают единственную прямую на плоскости.

Нам же интересен этот метод для разных других задач, по типу пересечение, расстояние и других. Также, часто в задаче прямая и задаётся данным способом.

Для перехода $2 \to 1$ подходит бесконечное множество параметров. Однако удобнее всего работать с целочисленными параметрами, во избежании погрешности вычислений.

Воспользуемся векторным произведением. Какая-то точка $D$ лежит на прямой $EF$, если выполняется:

$$
ED \times EF = 0
$$

Пусть $D(x, y), E(x_1, y_1), F(x_2, y_2)$:

$$
\begin{aligned}
ED \times EF &= (x - x_1) (y_2 - y_1) - (y - y_1) (x_2 - x_1) \\
&= (y_2 - y_1) \cdot x + (x_1 - x_2) \cdot y - x_1 y_2 + x_1 y_1 + y_1 x_2 - y_1 x_1 \\
&= \underbrace{(y_2 - y_1)}_{A} \cdot x + \underbrace{(x_1 - x_2)}_{B} \cdot y + \underbrace{(y_1 x_2 - x_1 y_2)}_{C}
\end{aligned}
$$

$$
\begin{aligned}
A &= y_2 - y_1 \\
B &= x_1 - x_2 \\
C &= y_1 x_2 - x_1 y_2 = \vec{F} \times \vec{E}
\end{aligned}
$$

$C$ очень похоже на *векторное произведение*.

![](/files/TwoDotToLine.gif)

Переход $2 \to 3$ тривиален, взять одну из точек, а направляющим вектором будет вектор из первой точки до второй.
### Точка и направляющий вектор
Точка $S$ и вектор $\vec{d}$.

Рассмотрим сразу переходы:

Переход $3 \to 2$ тривиален.

Переход $3 \to 1$. На самом деле он чуть проще выводиться, чем в предыдущем представлении. Прямая задаётся множеством решений для параметра $t$:

$$
D = S + t \vec{d}
$$

Пусть $D(x, y), S(x_1, y_1), d(x_2, y_2)$:

$$
\begin{cases}
x_1 + t x_2 = x \\
y_1 + t y_2 = y
\end{cases} \implies
t = \frac{x - x_1}{x_2}
$$

$$
\begin{aligned}
y_1 + \frac{x - x_1}{x_2} y_2 &= y \\
y_1 x_2 + x y_2 - x_1 y_2 &= y x_2 \\
\underbrace{(y_2)}_{A} x + \underbrace{(-x_2)}_{B} y + \underbrace{(y_1 x_2 - x_1 y_2)}_{C} &= 0
\end{aligned}
$$

$$
\begin{aligned}
A &= y_2 \\
B &= -x_2 \\
C &= y_1 x_2 - x_1 y_2 = \vec{d} \times \vec{S}
\end{aligned}
$$

## Луч
**Луч** - множество точек прямой, ограниченных с 1 стороны. Здесь способы задания сужаются:
- Две точки (одна из точек указывается началом луча)
- Точка и направляющий вектор

## Отрезок
**Отрезок** - множество точек прямой, ограниченных с двух сторон. Способ задания остаётся 1, и он очевиден: с помощью 2 точек.