# Неограниченный рюкзак
**Неограниченный рюкзак** (также **банкомат**) - каждый предмет в рюкзак можно взять непроизвольное количество раз. К предыдущему варианту (0-1 рюкзак) добавляется лишь 1 поправка - нужно рассматривать значения и на текущем слое.

$$
f(i, w) = max
\begin{cases}
0 &\text{ при } i = 0 \text{ и } w = 0 \\
-\infty &\text{ при } i = 0 \text{ и } w > 0 \\
f(i - 1, w) \\
f(i - 1, w - w_i) + v_i &\text{ при } w_i > w \\
f(i, w - w_i) + v_i &\text{ при } w_i > w \leftarrow \text{тут}
\end{cases}
$$

## Реализация
Идея всё та же:
```c++
// ...
// for i, for j, ...
if (j > w[i]) {
	dp[i + 1][j] = max(dp[i + 1][j], dp[i][j - w[i]] + v[i]);
	// добавляется:
	dp[i + 1][j] = max(dp[i + 1][j], dp[i + 1][j - w[i]] + v[i]);
}
```

## Оптимизация памяти
Что самое удивительное, здесь работают все те же оптимизации, что и в 0-1 Рюкзаке, за исключением 1 - итерироваться нужно слева направо. Теперь нам разрешено добавлять предметы неограниченно, и не важно, обновился ли массив до этого:

```c++
vector<int> dp(W + 1, -INF);
for (int i = 0; i < n; i++) {
	for (int j = w[i]; j <= W; j++) { // слева направо
		dp[j] = max(dp[j], dp[j - w[i]] + v[i]);
	}
}

// Ответ: dp[W]
```
